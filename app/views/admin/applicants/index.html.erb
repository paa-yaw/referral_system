<div class="col-md-12">
	<div class="card">
		<div class="card-header" data-background-color="purple">
			<h4 class="title">
				<%= @jd.company.company_name %>
				: </h4>
				<p class="category"><%= pluralize(@jd.applicants.count, "Applicant") %> for <%= @jd.job_title %></p>
			</div>
			<div class="card-content table-responsive">
				<table class="table">
					<thead class="text-primary">
						<th>Name</th>
						<th>Email</th>
						<th>Phonenumber</th>
						<th>Location</th>
						<th>Min Salary</th>
						<th>Max Salary</th>
						<th>CV/Resume</th>
						<th>Agreed salary</th>
						<th></th>
						<% if @applicants.any? { |applicant| !applicant.update_salary_button? } %>
						  <th></th>
						<% end %>  
						<% if @applicants.any? { |applicant| applicant.salary_negotiation? && !applicant.update_salary_button? } %>
						  <th></th>
						<% end %>
						  
						<% if @applicants.any? { |applicant| applicant.update_salary_button? } %>
						  <th></th>
						  <th></th>
						<% end %>
					</thead>
					<tbody>
						<% if @applicants.any? %>
						<% @applicants.each do |applicant| %>
						<tr>
							<td><%= link_to applicant.name, [:admin, applicant.job_description, applicant] %></td>
							<td><%= applicant.email %></td>
							<td><%= applicant.phonenumber %></td>
							<td><%= applicant.location %></td>
							<td><%= applicant.min_salary %></td>
							<td><%= applicant.max_salary %></td>
							<td><%= applicant.cv %></td>
							<td>
							  <button class="btn btn-success btn-xs btn-round">
							    <% if !applicant.hired? %>	
							  	  <%= number_with_precision(applicant.salary, precision: 2) %>**
							  	<% else %>
							  	  <%= number_with_precision(applicant.salary, precision: 2) %>  
							  	<% end %>  
							  </button>  	
							</td>
								<% if applicant.updated? %>
								  <%= simple_form_for([:admin, @jd, applicant]) do |f| %>
								  <td><%= f.select :status, options_for_select([["shortlisted", "shortlisted"], ["interviewing", "interviewing"], ["testing", "testing"], ["salary negotiation", "salary negotiation" ], ["hired", "hired"], ["not hired", "not hired"]], :selected => f.object.status),{}, class: "btn btn-primary btn-xs btn-round" %></td>

								  <td><%= f.button :submit, "submit", class: "btn btn-primary btn-xs btn-round" %></td>
								  <% end %>
								<% else %>

								<td>
								  <% if applicant.none? %>
								    <button class="btn btn-default btn-xs btn-round">
								  <% elsif applicant.interviewing? || applicant.testing? || applicant.shortlisted? %>
								    <button class="btn btn-default btn-xs btn-round">
								  <% elsif applicant.salary_negotiation? %>
								    <button class="btn btn-warning btn-xs btn-round">  
								  <% elsif applicant.hired? %>
								    <button class="btn btn-info btn-xs btn-round">    	
								  <% elsif applicant.not_hired? %>
								    <button class="btn btn-danger btn-xs btn-round">  
								  <% end %>

								  <%= applicant.status %>	
								</button>
								</td>
								<% if !applicant.update_salary_button? %>
								<td>
								  <%= link_to admin_update_button_for_applicants_url(applicant), method: :patch do %>
								  <button type="button" title="Edit Applicant" class="btn btn-primary btn-simple btn-xs">
								    <i class="material-icons">edit</i>
								  </button>
								  <% end %>
								</td>
								<% end %>  	
								

								
								<% if applicant.salary_negotiation? && !applicant.update_salary_button? %>
								<td>
								  <%= link_to admin_update_salary_url(applicant), method: :patch, data: { confirm: "Are you sure you want to edit applicant salary?" } do %>
								    <button type="button" title="Edit Applicant Salary" class="btn btn-primary btn-simple btn-xs">
								      <i class="material-icons">help</i>
								    </button>
								  <% end %>  
								</td>
								<% end %>  
								

								<% if applicant.update_salary_button? %>
								  <%= simple_form_for([:admin, @jd, applicant]) do |f| %>
								    <td><%= f.input :salary, label: false %></td>
								    <td><%= f.button :submit, "submit", class: "btn btn-primary btn-xs btn-round" %></td>
								  <% end %>
								<% end %>
								<%#= link_to job_description_applicant_url(@jd, applicant), method: :delete, data: { confirm: "are you sure?"}  do %>
								<!-- <button type="button" title="Remove" class="btn btn-primary btn-simple btn-xs">
									<i class="material-icons">close</i>
								</button> -->
								<%# end %>
								<% end %>  
						</tr>
						<% end %>
						<% else %>
						<tr>
							<td>no data</td>
							<td>no data</td>
							<td>no data</td>
							<td>no data</td>
							<td>no data</td>
							<td>no data</td>
							<td>no data</td>
							<td></td>
						</tr>   
						<% end %> 
					</tbody>
				</table>
				<div class="row">				
					<%= link_to admin_company_url(@jd.company, tab: "job descriptions"), class: "btn btn-primary btn-xs btn-round pull-right" do %>
					Go To <%= @jd.company.company_name %>'s job descriptions
					<% end %>
				</div>  
			</div>
		</div>
	</div>